(()=>{"use strict";const t=document.createElement("div");function e(e,i=""){const s=`${e}: ${i}`;t.insertAdjacentHTML("beforeEnd",`<p>${s}</p>`),console.log(s)}t.className="log-screen",document.body.prepend(t),console.clear(),setTimeout((()=>{t.classList.add("finished")}),3e3);class i{constructor(t,{cssGap:e}){this.groupsContainer=document.createElement("div"),this.initialGroup=null,this.root=t,this.originChildren=this.saveOriginChildren(),this.root.classList.add("tape-screen"),this.groupsContainer.style.setProperty("--gap",e)}saveOriginChildren(){return[...this.root.children].map((t=>t.cloneNode(!0)))}init(){this.initialGroup=this.#t(),this.groupsContainer.className="positioned-tape",this.groupsContainer.dataset.x=0,this.groupsContainer.innerHTML="",this.groupsContainer.append(this.initialGroup),this.root.append(this.groupsContainer)}#t(){const t=this.originChildren,e=document.createElement("div");return e.className="group",this.root.innerHTML="",this.root.append(e),e.append(...t),e}fitScreen(){const t=this.root.offsetWidth,e=this.groupsContainer.lastElementChild;if(i=e.lastElementChild.offsetLeft,t-i>0){const t=e.cloneNode(!0);this.groupsContainer.append(t),this.fitScreen()}else this.#e();var i}#e(){const t=document.createElement("div");t.className="super-group";const e=this.groupsContainer.children;t.append(...e);for(let e=1;e<=3;e++)this.groupsContainer.append(t.cloneNode(!0))}}class s{#i=1;#s=!0;#o=0;constructor({container:t,stepSize:e=1.35}){this.#i=e,this.direction="left",this.groupsContainer=t}get positionX(){return this.#o}set positionX(t){this.#o=t,this.groupsContainer.style.setProperty("--x",`${t.toFixed(2)}px`)}#n(){this.positionX-=this.#i}#r(){this.positionX+=this.#i}#a(){this.#s||("left"===this.direction?this.#n():this.#r(),requestAnimationFrame(this.#a.bind(this)))}start(){this.#s&&(this.#s=!1,this.#a())}stop(){return this.#s=!0,this}toggleDirection(){const t=this.direction;return this.direction="left"===t?"right":"left",this}}class o{constructor(t,e){this.observer=new IntersectionObserver(t,e)}observe(t){this.observer.observe(t)}unobserve(t){this.observer.unobserve(t)}}const{log:n}=console;const r=document.querySelector(".header-tape");let a;r&&(r.style.opacity=0,setTimeout((()=>{r.style.transition="opacity 500ms",r.style.opacity=1}),500),a=new class{#l;#h;#c;#d;#p;constructor({rootElem:t,cssGap:e=0,speed:n=1.3}){this.isValidRoot=t instanceof Element,this.isValidRoot&&(e=Number.parseFloat(e),this.#l=t,this.#h=new i(this.#l,{cssGap:e}),this.#h.init(),this.#h.fitScreen(),this.#c=new s({container:this.#h.groupsContainer,stepSize:n}),this.#d=new o(this.#u.bind(this),{root:this.#l,threshold:0}),this.#m(),this.#p={cssGap:e},window.addEventListener("resize",function(t){let e=Math.floor(document.documentElement.clientHeight);return function(t,{ms:e}){let i;return function(...s){clearTimeout(i),i=setTimeout((()=>t(s)),e)}}((()=>{const i=Math.floor(document.documentElement.clientHeight),s=Math.abs(e-i);e=i,s>0||t()}),{ms:100})}(this.handleResize.bind(this))))}handleResize(){this.#g(),this.#c.stop(),this.#h.init(),this.#h.fitScreen(),this.#m(),setTimeout((()=>{this.#c.start()}),500)}start(){this.isValidRoot&&this.#c.start()}stop(){this.isValidRoot&&this.#c.stop()}toggleDirection(){this.isValidRoot&&this.#c.toggleDirection()}#u(t,e){t.forEach((t=>{if(!1===t.isIntersecting){const e=t.boundingClientRect.width;"left"===this.#c.direction&&(this.#c.positionX=-1*e),"right"===this.#c.direction&&(this.#c.positionX=this.#c.positionX-(e+this.#p.cssGap))}}))}#m(){const t=this.#h.groupsContainer.children[1];this.#d.observe(t)}#g(){const t=this.#h.groupsContainer.children[1];this.#d.unobserve(t)}}({rootElem:r,cssGap:"0",speed:1.3}));const l={duration:0,maxDelay:1500,timerId:null,completeCounter:0,isComplete(t){return this.completeCounter===t},awaitLoading(t,{onProgress:i,onComplete:s}){let o=t.length;e("correct length",o>0);const n=[];if(t.length<1)return s();i(),e("onProgress","handled");const r=[...t].map((t=>async function(t){return(await fetch(t,{method:"HEAD"})).ok}(t.src)));this.timerId=setInterval((()=>{if(this.duration+=100,this.isComplete(o)&&this.duration>this.maxDelay)return e("loaded",!0),this.breakTimer(),void s()}),100),Promise.allSettled(r).then((i=>{i.forEach(((e,i)=>{e.value&&n.push(t[i])})),o=n.length,e("settled length",n.length),n.forEach((t=>{this.completeCounter++}))}))},breakTimer(){clearInterval(this.timerId)}},h=document.querySelector("#preloader"),c=new class{constructor({interval:t=1e3}={}){this.container=null,this.slides=null,this.timerId=null,this.interval=t,this.currentSlide=null,this.state="paused"}initSlider(t){if(t instanceof HTMLElement)return this.container=t,this.slides=[...this.container.children]||[],this.currentSlide=t.querySelector(".active")||this.slides[0],this}get canRun(){return this?.slides.length>0&&"playing"!==this.state}run(){this.canRun&&(this.state="playing",this.timerId=setInterval((()=>{this.currentSlide.classList.remove("active");let t=this.currentSlide.nextElementSibling;t?(t.classList.add("active"),this.currentSlide=t):(t=this.slides[0],t.classList.add("active"),this.currentSlide=t)}),this.interval),e("slider.run()"))}stop(){this.timerId&&(clearInterval(this.timerId),this.state="stopped")}pause(){clearInterval(this.timerId),this.state="paused"}}({interval:150}).initSlider(document.querySelector(".preloader-slider"));e("slides",c.slides.length),document.querySelector(".js-await-media");const d=document.querySelectorAll(".js-await-media video"),p=document.querySelector(".s2");e("videos",d.length),h&&(e("awaiting"),l.awaitLoading(d,{onProgress:()=>{!function(t,e="300ms ease-in 0ms"){t.style.opacity=0,t.offsetHeight,t.style.transition=`opacity ${e}`,t.style.opacity=1}(c.container,"300ms"),c.run(),e("onProgress","run")},onComplete:()=>{var t;if(c.stop(),"1000ms",(t=h).style.transition="opacity 1000ms",t.style.opacity=0,e("onComplete","run"),setTimeout((()=>{h.remove(),e("onComplete","hide overlay"),a?.start()}),1e3),p){const t=p.offsetHeight;p.style.marginTop=t/-1.6+"px",p.style.transform="translateY(50%)",p.offsetHeight,p.style.transition="transform 1000ms",p.style.transform="translateY(0)"}}})),window.onerror=t=>{e("error",t)},e("logging starts")})();